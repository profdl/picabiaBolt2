{
  "last_node_id": 180,
  "last_link_id": 476,
  "nodes": [
    {
      "id": 11,
      "type": "IPAdapterModelLoader",
      "pos": [
        826,
        212
      ],
      "size": [
        385.6692199707031,
        58
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IPADAPTER",
          "type": "IPADAPTER",
          "links": [
            442
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "IPAdapterModelLoader"
      },
      "widgets_values": [
        "ip-adapter_sdxl_vit-h.safetensors"
      ]
    },
    {
      "id": 12,
      "type": "CLIPVisionLoader",
      "pos": [
        895,
        735
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "links": [
            444
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPVisionLoader"
      },
      "widgets_values": [
        "model.safetensors"
      ]
    },
    {
      "id": 14,
      "type": "CheckpointLoaderSimple",
      "pos": [
        -1632,
        455
      ],
      "size": [
        529.8472290039062,
        98
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            443
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            415,
            416
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            44
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "sd_xl_base_1.0.safetensors"
      ]
    },
    {
      "id": 18,
      "type": "EmptyLatentImage",
      "pos": [
        1264,
        905
      ],
      "size": [
        315,
        106
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            256
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        1024,
        1024,
        1
      ]
    },
    {
      "id": 28,
      "type": "KSampler",
      "pos": [
        1728.0557861328125,
        310.2720031738281
      ],
      "size": [
        315,
        262
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "link": 449,
          "name": "model",
          "type": "MODEL",
          "slot_index": 0
        },
        {
          "link": 463,
          "name": "positive",
          "type": "CONDITIONING",
          "slot_index": 1
        },
        {
          "link": 255,
          "name": "negative",
          "type": "CONDITIONING",
          "slot_index": 2
        },
        {
          "link": 256,
          "name": "latent_image",
          "type": "LATENT",
          "slot_index": 3
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            257
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        996690635447661,
        "fixed",
        30,
        7,
        "dpmpp_2m_sde_gpu",
        "karras",
        1
      ]
    },
    {
      "id": 29,
      "type": "VAEDecode",
      "pos": [
        2128.0556640625,
        370.2720031738281
      ],
      "size": [
        210,
        46
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "link": 257,
          "name": "samples",
          "type": "LATENT"
        },
        {
          "link": 44,
          "name": "vae",
          "type": "VAE",
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            451
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      },
      "widgets_values": []
    },
    {
      "id": 159,
      "type": "IPAdapterAdvanced",
      "pos": [
        1258.055908203125,
        570.2721557617188
      ],
      "size": [
        315,
        278
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "link": 443,
          "name": "model",
          "type": "MODEL"
        },
        {
          "link": 442,
          "name": "ipadapter",
          "type": "IPADAPTER"
        },
        {
          "link": 476,
          "name": "image",
          "type": "IMAGE",
          "slot_index": 2
        },
        {
          "link": null,
          "name": "image_negative",
          "type": "IMAGE",
          "shape": 7
        },
        {
          "link": null,
          "name": "attn_mask",
          "type": "MASK",
          "shape": 7
        },
        {
          "link": 444,
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "shape": 7
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            449
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "IPAdapterAdvanced"
      },
      "widgets_values": [
        0.7000000000000001,
        "linear",
        "concat",
        0,
        1,
        "V only"
      ]
    },
    {
      "id": 165,
      "type": "SaveImage",
      "pos": [
        2438.0556640625,
        380.2720031738281
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "link": 451,
          "name": "images",
          "type": "IMAGE"
        }
      ],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "ComfyUI"
      ]
    },
    {
      "id": 167,
      "type": "ControlNetLoader",
      "pos": [
        -690,
        990
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            454
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "t2i-adapter-depth-midas-sdxl-1.0.safetensors"
      ]
    },
    {
      "id": 168,
      "type": "ControlNetApplyAdvanced",
      "pos": [
        -250,
        860
      ],
      "size": [
        315,
        186
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 452
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": null
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 454
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 455
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null,
          "shape": 7
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [
            458
          ],
          "slot_index": 0
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetApplyAdvanced"
      },
      "widgets_values": [
        1,
        0,
        1
      ]
    },
    {
      "id": 169,
      "type": "LoadImage",
      "pos": [
        -670,
        1130
      ],
      "size": [
        315,
        102
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            455
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        null,
        "image"
      ]
    },
    {
      "id": 170,
      "type": "ControlNetLoader",
      "pos": [
        -110,
        1190
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            456
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "t2i-adapter-canny-sdxl-1.0.safetensors"
      ]
    },
    {
      "id": 171,
      "type": "ControlNetApplyAdvanced",
      "pos": [
        270,
        1030
      ],
      "size": [
        315,
        186
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 458
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": null
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 456
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 457
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null,
          "shape": 7
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [
            462
          ],
          "slot_index": 0
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetApplyAdvanced"
      },
      "widgets_values": [
        1,
        0,
        1
      ]
    },
    {
      "id": 172,
      "type": "LoadImage",
      "pos": [
        -90,
        1330
      ],
      "size": [
        315,
        102
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            457
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        null,
        "image"
      ]
    },
    {
      "id": 173,
      "type": "ControlNetLoader",
      "pos": [
        350,
        1320
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            460
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "t2i-adapter-openpose-sdxl-1.0.safetensors"
      ]
    },
    {
      "id": 174,
      "type": "ControlNetApplyAdvanced",
      "pos": [
        776,
        1088
      ],
      "size": [
        315,
        186
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 462
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": null
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 460
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 461
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null,
          "shape": 7
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [
            463
          ],
          "slot_index": 0
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetApplyAdvanced"
      },
      "widgets_values": [
        1,
        0,
        1
      ]
    },
    {
      "id": 175,
      "type": "LoadImage",
      "pos": [
        370,
        1460
      ],
      "size": [
        315,
        102
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            461
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        null,
        "image"
      ]
    },
    {
      "id": 163,
      "type": "LoadImage",
      "pos": [
        -151,
        -32
      ],
      "size": [
        315,
        314
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            475
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "images.jpg",
        "image"
      ]
    },
    {
      "id": 180,
      "type": "PrepImageForClipVision",
      "pos": [
        388,
        206
      ],
      "size": [
        315,
        106
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 475
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            476
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "PrepImageForClipVision"
      },
      "widgets_values": [
        "LANCZOS",
        "top",
        0
      ]
    },
    {
      "id": 135,
      "type": "CLIPTextEncode",
      "pos": [
        -913,
        603
      ],
      "size": [
        279.5165710449219,
        96
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "link": 415,
          "name": "clip",
          "type": "CLIP"
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            452
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "positive_prompt"
      ]
    },
    {
      "id": 17,
      "type": "CLIPTextEncode",
      "pos": [
        -903,
        791
      ],
      "size": [
        276.2105407714844,
        96
      ],
      "flags": {
        "collapsed": false
      },
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "link": 416,
          "name": "clip",
          "type": "CLIP"
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            255
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "negative_prompt"
      ]
    }
  ],
  "links": [
    [
      44,
      14,
      2,
      29,
      1,
      "VAE"
    ],
    [
      255,
      17,
      0,
      28,
      2,
      "CONDITIONING"
    ],
    [
      256,
      18,
      0,
      28,
      3,
      "LATENT"
    ],
    [
      257,
      28,
      0,
      29,
      0,
      "LATENT"
    ],
    [
      415,
      14,
      1,
      135,
      0,
      "CLIP"
    ],
    [
      416,
      14,
      1,
      17,
      0,
      "CLIP"
    ],
    [
      442,
      11,
      0,
      159,
      1,
      "IPADAPTER"
    ],
    [
      443,
      14,
      0,
      159,
      0,
      "MODEL"
    ],
    [
      444,
      12,
      0,
      159,
      5,
      "CLIP_VISION"
    ],
    [
      449,
      159,
      0,
      28,
      0,
      "MODEL"
    ],
    [
      451,
      29,
      0,
      165,
      0,
      "IMAGE"
    ],
    [
      452,
      135,
      0,
      168,
      0,
      "CONDITIONING"
    ],
    [
      454,
      167,
      0,
      168,
      2,
      "CONTROL_NET"
    ],
    [
      455,
      169,
      0,
      168,
      3,
      "IMAGE"
    ],
    [
      456,
      170,
      0,
      171,
      2,
      "CONTROL_NET"
    ],
    [
      457,
      172,
      0,
      171,
      3,
      "IMAGE"
    ],
    [
      458,
      168,
      0,
      171,
      0,
      "CONDITIONING"
    ],
    [
      460,
      173,
      0,
      174,
      2,
      "CONTROL_NET"
    ],
    [
      461,
      175,
      0,
      174,
      3,
      "IMAGE"
    ],
    [
      462,
      171,
      0,
      174,
      0,
      "CONDITIONING"
    ],
    [
      463,
      174,
      0,
      28,
      1,
      "CONDITIONING"
    ],
    [
      475,
      163,
      0,
      180,
      0,
      "IMAGE"
    ],
    [
      476,
      180,
      0,
      159,
      2,
      "IMAGE"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.5730855330116905,
      "offset": [
        763.8801278812653,
        121.01828880347861
      ]
    },
    "groupNodes": {}
  },
  "version": 0.4
}